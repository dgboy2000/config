###############################################################################
# This GNU Screen profile was generated by the byobu-export
# program, which is part of the byobu package, and contains a
# subset of the functionality available from the full package.
#
# For more information, source code, questions, and bugs, see:
#  * https://launchpad.net/byobu
#
#    Copyright (C) 2008 Canonical Ltd.
#
#    Author: Dustin Kirkland <kirkland@canonical.com>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, version 3 of the License.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
###############################################################################

###############################################################################
#    Screen common profile
#      This configuration profile is intended to be a common header of useful
#      functionality, included by other profiles.
#
#    Copyright (C) 2008 Canonical Ltd.
#
#    Authors: Dustin Kirkland <kirkland@canonical.com>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, version 3 of the License.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
###############################################################################

# Now, let's override with our customizations
startup_message off
vbell off
msgwait 1
defutf8 on

# Define status commands
#   Use prime number intervals, to decrease collisions, which
#   yields some less expensive status updates.
#   ~86000 ~1 day
#   ~600   ~10 minutes
#   ~180   ~3 minutes
#   ~60    ~1 minute
backtick 10 	86389	86389		$HOME/.byobu/byobu-janitor
backtick 11	86399	86399		printf "\005-1="
backtick 99  	86011	86011		$HOME/.byobu/byobu-status logo
backtick 100	599	599		$HOME/.byobu/byobu-status release
backtick 101 	7	7		$HOME/.byobu/byobu-status updates_available
backtick 102 	5	5		$HOME/.byobu/byobu-status reboot_required
backtick 103 	2	2		$HOME/.byobu/byobu-status cpu_freq
backtick 104 	86017	86017		$HOME/.byobu/byobu-status cpu_count
backtick 105 	86027	86027		$HOME/.byobu/byobu-status mem_available
backtick 106 	2	2		$HOME/.byobu/byobu-status load_average
backtick 107 	13	13		$HOME/.byobu/byobu-status mem_used
backtick 108 	601	601		$HOME/.byobu/byobu-status ec2_cost
backtick 109 	607	607		$HOME/.byobu/byobu-status hostname
backtick 110 	86029	86029		$HOME/.byobu/byobu-status whoami
backtick 111 	86069	86069		$HOME/.byobu/byobu-status menu
backtick 112 	86077	86077		$HOME/.byobu/byobu-status arch
backtick 113 	61	61		$HOME/.byobu/byobu-status battery
backtick 114 	11	11		$HOME/.byobu/byobu-status users
backtick 115 	29	29		$HOME/.byobu/byobu-status uptime
backtick 116 	7	7		$HOME/.byobu/byobu-status processes
backtick 117 	3	3		$HOME/.byobu/byobu-status network
backtick 118 	86083	86083		true
backtick 119 	17	17		$HOME/.byobu/byobu-status wifi_quality
backtick 120 	86111	86111		$HOME/.byobu/byobu-status date
backtick 121 	86113	86113		$HOME/.byobu/byobu-status time
backtick 122 	127	127		$HOME/.byobu/byobu-status ip_address
backtick 123 	13	13		$HOME/.byobu/byobu-status disk
backtick 124 	86117	86117		true
backtick 125 	19	19		$HOME/.byobu/byobu-status temp_c
backtick 126 	19	19		$HOME/.byobu/byobu-status temp_f
backtick 127 	5	5		$HOME/.byobu/byobu-status mail
backtick 128 	23	23		$HOME/.byobu/byobu-status fan_speed

hardstatus alwayslastline

# Turns off alternate screen switching in xterms,
# so that text in screen will go into the xterm's scrollback buffer:
termcapinfo xterm* ti@:te@
altscreen on

# Enable 256 color terminal
attrcolor b ".I"
termcapinfo xterm 'Co#256:AB=\E[48;5;%dm:AF=\E[38;5;%dm'
defbce "on"

# Log 10000 lines
defscrollback 10000

# Maintain SSH_AUTH_SOCK link
setenv SSH_AUTH_SOCK /var/run/screen/S-$USER/byobu.ssh-agent


###############################################################################

###############################################################################
#    Byobu f-key keybindings
#      This configuration profile is intended to provide a useful
#      keybindings using the keyboard's f-keys
#
#    Copyright (C) 2008  Nick Barcet <nick.barcet@canonical.com>
#                        Dustin Kirkland <kirkland@canonical.com>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, version 3 of the License.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
###############################################################################

# F-keys seem to work well in both gnome-terminal and tty consoles
							# F1  | 'help' in gnome-terminal
bindkey -k k2 screen					# F2  | Create new window
bindkey -k k3 prev					# F3  | Previous Window
bindkey -k k4 next					# F4  | Next Window
register r "^a:source $HOME/.byobu/profile^M"		#     | Goes with F5 definition
bindkey -k k5 process r					# F5  | Reload profile
bindkey -k k6 detach					# F6  | Detach from this session
bindkey -k k7 copy					# F7  | Enter copy/scrollback mode
register t "^aA^aa^k^h"					#     | Goes with the F8 definition
bindkey -k k8 process t 				# F8  | Re-title a window
bindkey -k k9 screen -t config 0 byobu-config		# F9  | Configuration
							# F10 | 'toolbar' in gnome-terminal
							# F11 | 'fullscreen' in gnome-terminal
bindkey -k F2 lockscreen				# F12 | Lock this terminal
bind $ screen -t status 0 byobu-status-detail 		# ctrl-a $ | show detailed status
bind @ screen -t config 0 byobu-config			# ctrl-a @ | Configuration
bind R process r					# ctrl-a R | Reload profile

# toggle f-key keybindings off
register d "^a:source /usr/share/byobu/keybindings/screen-escape-keys^M"
bind ! process d
###############################################################################

###############################################################################
###############################################################################
#    Screen Profile
#      This configuration profile is intended to roughly approximate graphical
#      desktop within 'screen'; inspired by the Ubuntu Gnome Desktop.
#
#    Copyright (C) 2008 Canonical Ltd.
#
#    Authors: Dustin Kirkland <kirkland@canonical.com>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, version 3 of the License.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
###############################################################################

# Proper scrolling
termcapinfo xterm* ti@:te@

# Window tabs, second to last line
caption always "%{wK}%?%-Lw%50L>%?%{bw}%n*%f %t%?(%u)%?%{wK}%?%+Lw%?%11` %=%{= Kw}%110`%109`%122`%111`%10`%<"

# Status string, last line
hardstatus string '%99`%{= Kw} %100`%112`%= %102`%101`%127`%114`%115`%108`%128`%125`%126`%113`%119`%117`%116`%106`%104`%103`%105`%107`%123`%120`%121`'

# NOTE: Older version of screen have an arbitrary limit of only being able
# to change colors 16 times in this 'hardstatus string'.
# Ubuntu (fixed in Jaunty):
#  * https://bugs.launchpad.net/bugs/315871
# Upstream:
#  * http://savannah.gnu.org/bugs/?22146
###############################################################################
